---
import Layout from '../layouts/Layout.astro';
import { TerminalCommand, TerminalSection, FileHeader, ProjectCard, SkillCategoryCard, ContentBox } from '../components';
import LGLogo from '../assets/lg-logo.svg?url';
import VersuredLogo from '../assets/versured-logo.svg?url';
import EkNepalLogo from '../assets/eknepal-logo.svg?url';
import TimeeroLogo from '../assets/timeero-logo.svg?url';
import TrackflyLogo from '../assets/trackfly-logo.svg?url';

// Extract image URLs as strings to avoid template parsing issues
const lgLogoUrl = LGLogo as string;
const trackflyLogoUrl = TrackflyLogo as string;
const timeeroLogoUrl = TimeeroLogo as string;
const versuredLogoUrl = VersuredLogo as string;
const ekNepalLogoUrl = EkNepalLogo as string;

const companiesData = [
	{
		img: { src: lgLogoUrl, alt: "Life's good logo." },
		title: "Life's Good - US",
		desc: "Life's Good with electronics by your side!",
		url: "https://lg.com/us",
		status: "active" as const,
		pid: "1001"
	},
	{
		img: { src: trackflyLogoUrl, alt: "Trackfly logo." },
		title: "Trackfly",
		desc: 'Better market intelligence to independent retailers and their suppliers.',
		url: "https://www.trackfly.com/",
		status: "completed" as const,
		pid: "1002"
	},
	{
		img: { src: timeeroLogoUrl, alt: "Timeero logo." },
		title: "Timeero",
		desc: 'A time tracking and GPS company that provides precise and segmented time breakdowns for all employees.',
		url: "https://timeero.com",
		status: "completed" as const,
		pid: "1003"
	},
	{
		img: { src: versuredLogoUrl, alt: "Versured logo." },
		title: "Versured",
		desc: 'An insurance portal that combines all possible insurance combinations to match your perfect needs.',
		url: "https://www.linkedin.com/company/versured",
		status: "completed" as const,
		pid: "1004"
	},
	{
		img: { src: ekNepalLogoUrl, alt: "Ek Nepal logo." },
		title: "Ek Nepal",
		desc: 'A truthful news aggregator. From Nepal, for Nepal.',
		url: "https://www.eknepal.com/",
		status: "completed" as const,
		pid: "1005"
	},
];

const researchProjects = [
	{
		title: "Mathematics Research",
		lab: "Math Department",
		supervisor: "Dr. Mahsa Nasrollahi-Shirazi & Dr. Andrii",
		description: "Working on k-nary trees and the HK-property. Connected to the Erdős–Ko–Rado theorem but applied to perfect binary trees.",
		technologies: ["Perfect k-nary Trees", "HK-property Analysis", "SageMath Visualizations"],
		status: "active" as const,
		pid: "2001"
	},
	{
		title: "GADA Lab Research",
		lab: "GADA Lab",
		supervisor: "Dr. Stephane Durocher",
		description: "Working on approximation algorithms for spatially embedded graphs, tackling complex networks in manageable ways.",
		technologies: ["Approximation Algorithms", "Spatially Embedded Graphs", "Metric Optimization"],
		status: "active" as const,
		pid: "2002"
	},
	{
		title: "Computer Vision Lab",
		lab: "CV Lab",
		supervisor: "Dr. Christopher Henry",
		description: "Collaborating on computer vision research, exploring innovative approaches to visual data analysis and machine learning.",
		technologies: ["PyTorch and PyTorch Geometric", "Machine Learning", "Visual Data Analysis"],
		status: "active" as const,
		pid: "2003"
	}
];

const skillCategories = [
	{
		category: "Languages & Databases",
		icon: "",
		skills: ["JavaScript, Java, Python", "C/C++, R, SageMath", "PostgreSQL, MSSQL", "SQLite, MongoDB"]
	},
	{
		category: "Frameworks",
		icon: "",
		skills: ["ReactJS", "NextJS", "AstroJS", "FastAPI"]
	},
	{
		category: "Developer Tools",
		icon: "",
		skills: ["Git, Neovim", "Tmux, Docker", "VS Code", "IntelliJ"]
	},
	{
		category: "UI Tools",
		icon: "",
		skills: ["Figma", "Adobe XD", "Adobe Illustrator"]
	}
];
---

<Layout title=":~$ ls -la ~/projects/">
	<TerminalSection command="ls -la" path="~/projects">
		<FileHeader 
			fileName="PROJECTS_INDEX.md"
			totalEntries={companiesData.length + researchProjects.length}
			permission="rwxr-xr-x"
		>
			<h1 class="text-xl md:text-2xl md:text-3xl font-bold text-tertiary-base mb-4 font-mono">
				PROJECTS_INDEX.md
			</h1>
			<p class="text-text-300 leading-relaxed mb-4">
				Here's a collection of things I've been working on – from research projects 
				that keep me up at night thinking, to professional work that actually pays the bills.
			</p>
		</FileHeader>
	</TerminalSection>

	<TerminalSection command='find ./professional -type f -name "*.project"' path="~/projects" className="mb-12">
		<div class="text-text-400 mb-4">
			<span class="text-tertiary-base">></span> Found {companiesData.length} professional project(s):
		</div>
		
		<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
			{companiesData.map((company) => {
				const imgSrc = company.img.src;
				const imgAlt = company.img.alt;
				return (
					<ProjectCard
						title={company.title}
						description={company.desc}
						status={company.status}
						pid={company.pid}
						url={company.url}
						imgSrc={imgSrc}
						imgAlt={imgAlt}
						type="professional"
					/>
				);
			})}
		</div>
	</TerminalSection>

	<TerminalSection command='find ./research -type d -name "*lab*"' path="~/projects" className="mb-12">
		<div class="text-text-400 mb-4">
			<span class="text-tertiary-base">></span> Research portfolio overview:
		</div>
		
		<ContentBox 
			title="== LAB_RESEARCH.md ==" 
			borderColor="secondary"
			className="mb-6"
			centered={true}
		>
			<div class="space-y-4">
				<p>I'm lucky enough to be doing research in three different labs.</p>
				<p>
					With the mathematics department, I'm diving deep into k-nary trees and something called the HK-property 
					with Dr. Mahsa Nasrollahi-Shirazi and Dr. Andrii Arman. It's related to the famous 
					<a href="https://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93Ko%E2%80%93Rado_theorem" target="_blank" 
						class="text-secondary-400 hover:text-secondary-300 underline">
						Erdős–Ko–Rado theorem
					</a> but restricted to 
					<a href="https://xlinux.nist.gov/dads/HTML/perfectBinaryTree.html" target="_blank" 
						class="text-secondary-400 hover:text-secondary-300 underline">
						perfect binary trees
					</a>.
				</p>
				<p>
					On the theoretical algorithms side, I'm working with the 
					<a href="https://home.cs.umanitoba.ca/~gada/" target="_blank" 
						class="text-tertiary-base hover:text-tertiary-400 underline font-bold">
						GADA lab
					</a> under Dr. Stephane Durocher. We're working on approximation algorithms 
					for spatially embedded graphs, which is a fancy way of saying we're trying to make 
					sense of complex networks in a more manageable way.
				</p>
				<p>
					And finally, I'm also doing some research in the 
					<a href="https://terrabyte.acs.uwinnipeg.ca/" target="_blank" 
						class="text-tertiary-base hover:text-tertiary-400 underline font-bold">
						Computer Vision Lab
					</a> with Dr. Christopher Henry.
				</p>
			</div>
		</ContentBox>

		<div class="text-text-400 mb-4">
			<span class="text-tertiary-base">></span> Active research processes:
		</div>
		
		<div class="grid md:grid-cols-1 gap-4">
			{researchProjects.map((project) => (
				<ProjectCard
					title={project.title}
					description={project.description}
					status={project.status}
					pid={project.pid}
					lab={project.lab}
					supervisor={project.supervisor}
					technologies={project.technologies}
					type="research"
				/>
			))}
		</div>
	</TerminalSection>

	<TerminalSection command="cat ~/config/skills.conf" path="~/projects" className="mb-12">
		<div class="text-text-400 mb-4">
			<span class="text-tertiary-base">></span> System configuration loaded:
		</div>
		
		<div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
			{skillCategories.map((category, index) => (
				<SkillCategoryCard
					category={category.category}
					skills={category.skills}
					icon={category.icon}
					index={index}
				/>
			))}
		</div>
	</TerminalSection>

	<TerminalSection command="wc -l *" path="~/projects" className="mb-8">
		<div class="bg-primary-900 border border-primary-700 p-4">
			<div class="text-text-400 font-mono text-sm space-y-1">
				<div class="flex justify-between">
					<span>Professional projects:</span>
					<span class="text-tertiary-base">{companiesData.length} files</span>
				</div>
				<div class="flex justify-between">
					<span>Research projects:</span>
					<span class="text-tertiary-base">{researchProjects.length} directories</span>
				</div>
				<div class="flex justify-between">
					<span>Skill categories:</span>
					<span class="text-tertiary-base">{skillCategories.length} configs</span>
				</div>
				<div class="border-t border-primary-600 pt-2 mt-2 flex justify-between font-bold">
					<span>Total entries:</span>
					<span class="text-tertiary-base">{companiesData.length + researchProjects.length + skillCategories.length}</span>
				</div>
			</div>
		</div>
	</TerminalSection>
</Layout>
